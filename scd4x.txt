

<<SCD4x Sensorの概要>>
・CO2センシング性能
SCD40 測定精度 400 ppm - 2,000 ppm ± (誤差:50 ppm ± 5%)
SCD41 測定精度 400 ppm - 5,000 ppm ± (誤差:40 ppm + 5%)

・電気的特性
ピーク供給電流：5V - 115~137 mA
周期的測定、周期的測定の平均供給電流：5V - 11~13 mA
周期的測定の平均電源電流、低電力周期的測定：5V - 2.8~3.0 mA
周期的なシングルショット測定の平均供給電流(1回/5分の場合)(SCD41のみ)：5V - 0.36~0.4 mA

3.5 基本コマンド
本項では，定期的な測定を開始し，その後にセンサ出力を読み出すために必要な SCD4x の基本コマンドを示します。
I2C マスタ(マイクロコントローラなど)と SCD4x センサ間の典型的な通信シーケンスは以下の通りです。
1. センサーの電源投入
2. I2C マスタから start_periodic_measurement コマンドが送信される。信号の更新間隔は5秒
3. I2C マスタは，Read Measurement シーケンスで定期的にデータを読み出す
4. センサーをアイドルモードに戻すために，I2C マスタから stop periodic measurement コマンドが送信されます
定期測定の実行中は、read_measurement、get_data_ready_status、stop_periodic_measurement および set_ambient_pressure を除き、他のコマンドを発行してはいけません。

3.5.1 start_periodic_measurement(周期的測定の開始)
説明：定期的な測定を開始、信号の更新間隔は5秒。

3.5.2 read_measurement(測定値の読み込み)
説明：センサー出力の読み出し。読み出し時にバッファが空になるため、測定データは信号更新間隔ごとに1回しか読み出せません。バッファにデータが存在しない場合、センサーは NACK を返します。NACK レスポンスを回避するために、get_data_ready_status を発行してデータの状態を確認することができます（詳細は 3.8.2 章を参照）。I2Cマスタは、ユーザが後続のデータに興味がない場合、任意のデータバイトの後にNACKに続くSTOP条件を発行して、読み出し転送を中止することができます。

3.5.3 stop_periodic_measurement(定期的な測定を停止します)
説明：センサーの設定変更や節電のために、定期的な測定を停止します。センサーは 500ms 待機してからでないと、他のコマンドに反応しないことに注意してください。stop_periodic_measurement コマンドを発行してから 500ms 待ってからでないと他のコマンドに反応しません。


3.7 センサーのキャリブレーション
SCD4xは、高い初期精度と長期精度を実現するために、2つのキャリブレーション機能を備えています。強制再校正（FRC）は、CO2の基準値を用いて最高の精度を即座に復元することができます。一般的にFRCは、センサーの組み立て工程やその他の大きなストレスに起因するドリフトを補正するために使用されます。自動自己校正（ASC）は、SCD4xの長期的な安定性を確保します。 自動自己校正（ASC）は、ユーザーが手動で操作することなく、SCD4xの長期的な安定性を確保します。自動自己校正アルゴリズムは、センサーが少なくとも週に一度、大気中の CO2 濃度 400ppm にさらされることを前提としています。


3.8 Low Power operation(低電力モード)
SCD4xは、限られたパワーバジェットでの使用を可能にするため、信号の更新間隔が約30秒の低電力周期測定モードを備えています。低消費電力モードは電力を節約し、センサーの自己発熱を抑えることができますが、低消費電力の周期的測定モードは応答時間が長くなります。
低消費電力の周期的測定モードは、デフォルトの周期的測定と同様の方法で開始され、読み出されます。
詳細は、3.5.2章を参照してください。後続の測定結果がまだ準備できていない場合にNACKを受信しないように、get_data_ready_statusコマンドを使用して、新しい測定データが読み出し可能かどうかを確認できます。

3.8.1 start_low_power_periodic_measurement(低電力モードで定期測定を開始)
説明：低消費電力の定期的な測定を開始します。信号の更新間隔は約 30 秒です。


3.10 Low power single shot(低電力シングルショット/SCD41)
SCD41は、周期的な測定モードに加えて、シングルショット測定モード(オンデマンド測定が可能)を備えています。
典型的な通信シーケンスは以下の通りです。
1. センサーの電源を入れる。
2. I2C マスタがシングルショットコマンドを送信し，指定された最大コマンド継続時間を待ちます。
3. I2C マスタは、Read Measurement シーケンス（3.5.2 章）でデータを読み出します。
4. アプリケーションの要求に応じて、ステップ 2-3 を繰り返します。
ノイズレベルを低減するために、I2C マスタは複数のシングルショット測定を連続して行い、CO2 出力値を平均化することができます。
電源再投入後は、精度を最大限に高めるため、最初の2回のシングルショット測定値は破棄してください。測定と測定の間のアイドル電流は、それぞれ0.15mA（typ.）、0.2mA（max.）です。1回のシングルショットで消費されるエネルギーは243mJ（最大296mJ）です。
周期的な測定モードでは、シングルショット動作時に自動自己校正（ASC）がデフォルトで有効になっています。
自動自己校正は、5分ごとに行われるシングルショット測定に最適です。測定間隔が長くなると、自己校正の頻度は低くなります。自動自己校正の詳細および対応するコマンドについては、3.7 章を参照してください。

3.10.1 measure_single_shot(シングルショット測定)
説明：CO2 濃度、相対湿度、温度をオンデマンドで測定します。センサー出力の読み出しは read_measurement コマンド（3.5.2）を使用します。



